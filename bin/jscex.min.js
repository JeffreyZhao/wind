Jscex=function(){function f(a){this.n=a;this.h=Jscex.builders[a].binder;this.f=!1}var e=0;f.prototype={b:function(a){this.l.push(a);return this},p:function(a){this.l=[];var b=a[3];this.b("function ("+a[2].join(", ")+") {");this.b("var $_builder_$ = Jscex.builders["+JSON.stringify(this.n)+"];");this.b("return $_builder_$.Start(this, $_builder_$.Delay(function () {");this.d(b);this.b("}));");this.b("}");return this.l.join("")},o:function(a){var b=a[0];if(b=="stat"){if(b=a[1],b[0]=="call"){var c=b[1];
if(c[0]=="name"&&c[1]==this.h)return{j:b[2][0],g:"",k:!1}}}else if(b=="var"){if(a=a[1],a.length==1&&(b=a[0],a=b[0],(b=b[1])&&b[0]=="call"))if(c=b[1],c[0]=="name"&&c[1]==this.h)return{j:b[2][0],g:a,k:!1}}else if(b=="return"&&(b=a[1])&&b[0]=="call")if(c=b[1],c[0]=="name"&&c[1]==this.h)return{j:b[2][0],g:"$$__$$__",k:!0};return null},d:function(a,b){arguments.length<=1&&(b=0);if(b>=a.length)return this.b("return $_builder_$.Normal();"),this;var c=a[b],d=this.o(c);d?(this.b("return $_builder_$.Bind(").c(d.j).b(", function ("+
d.g+") {"),d.k?this.b("return $_builder_$.Return("+d.g+");"):this.d(a,b+1),this.b("});")):(d=c[0],d=="return"||d=="break"||d=="continue"||d=="throw"?this.c(c):d=="while"||d=="try"||d=="if"||d=="for"||d=="do"||d=="for-in"?b==a.length-1?this.b("return ").c(c).b(";"):(this.b("return $_builder_$.Combine("),this.c(c).b(",").b("$_builder_$.Delay(function () {"),this.d(a,b+1),this.b("})"),this.b(");")):this.c(c).d(a,b+1));return this},e:function(a){for(var b=0,c=a.length;b<c;b++)this.c(a[b])},m:function(a){var b=
this.f;this.f=!0;var c=a[3];this.b("function "+(a[1]||"")+"("+a[2].join(", ")+") {");this.e(c);this.b("}");this.f=b},c:function(a){var b=a[0],c=null;this.f?(c=this.i[b+"_n"])||(c=this.i[b]):c=this.i[b];c&&c.call(this,a);return this},i:{call:function(a){this.c(a[1]).b("(");a=a[2];for(var b=0,c=a.length;b<c;b++)this.c(a[b]),b<c-1&&this.b(", ");this.b(")")},name:function(a){this.b(a[1])},object:function(a){this.b("{");a=a[1];for(var b=0,c=a.length;b<c;b++)this.b(JSON.stringify(a[b][0])+": ").c(a[b][1]),
b<c-1&&this.b(", ");this.b("}")},array:function(a){this.b("[");a=a[1];for(var b=0,c=a.length;b<c;b++)this.c(a[b]),b<c-1&&this.b(", ");this.b("]")},num:function(a){this.b(a[1])},regexp:function(a){this.b("/"+a[1]+"/"+a[2])},string:function(a){this.b(JSON.stringify(a[1]))},"for":function(a){this.b("$_builder_$").b(".Delay(function () {");var b=a[1];b&&(b[0]=="var"?this.c(b):this.c(b).b(";"));this.b("return $_builder_$.Loop(");(b=a[2])?(this.b("function () {"),this.b("return ").c(b).b(";"),this.b("},")):
this.b("null,");this.b("function () { ");(b=a[3])&&this.c(b).b(";");this.b("},").b("$_builder_$.Delay(function () {");this.c(a[4]);this.b("}),").b("false");this.b(");");this.b("})")},for_n:function(a){this.b("for (");var b=a[1];b?(this.c(b),b[0]!="var"?this.b("; "):this.b(" ")):this.b("; ");(b=a[2])&&this.c(b);this.b("; ");(b=a[3])&&this.c(b);this.b(") {");this.c(a[4]);this.b("}")},"for-in":function(a){this.b("$_builder_$").b(".Delay(function () {");var b="$$_members_$$_"+e,c="$$_index_$$_"+e;e++;
var d=a[3];this.b("var "+b+" = [];");this.b("for (var m in ").c(d).b(") "+b+".push(m);");this.b("var "+c+" = 0;");d=a[2][1];a[1][0]=="var"&&this.b("var "+d+";");this.b("return $_builder_$.Loop(");this.b("function () {");this.b("return "+c+" < "+b+".length;");this.b("},");this.b("function () { ");this.b(c+"++;");this.b("},").b("$_builder_$.Delay(function () {");this.b(d+" = "+b+"["+c+"];");this.c(a[4]);this.b("}),").b("false");this.b(");");this.b("})")},"for-in_n":function(a){this.b("for (");var b=
a[1];b[0]=="var"?this.b("var "+b[1][0][0]):this.c(b);this.b(" in ").c(a[3]).b(") {");this.c(a[4]);this.b("}")},seq:function(a){for(var b=1;b<a.length;b++)this.c(a[b]),b<a.length-1&&this.b(", ")},"var":function(a){this.b("var ");a=a[1];for(var b=0,c=a.length;b<c;b++)this.b(a[b][0]),a[b].length>1&&this.b(" = ").c(a[b][1]),b<c-1&&this.b(", ");this.b(";")},binary:function(a){var b=a[1],c=a[2];a=a[3];this.b("(").c(c).b(") ");this.b(b);this.b(" (").c(a).b(")")},sub:function(a){var b=a[1];a=a[2];this.b("(").c(b).b(")[").c(a).b("]")},
"unary-postfix":function(a){var b=a[1];this.c(a[2]).b(b)},"unary-prefix":function(a){var b=a[2];this.b(a[1]).c(b)},assign:function(a){var b=a[1],c=a[3];this.c(a[2]);typeof b=="string"?this.b(" "+b+"= "):this.b(" = ");this.c(c)},stat:function(a){this.c(a[1]).b(";")},dot:function(a){this.b("(").c(a[1]).b(").").b(a[2])},block:function(a){this.d(a[1])},block_n:function(a){this.e(a[1])},"new":function(a){var b=a[1];this.b("new ").c(b).b("(");a=a[2];b=0;for(var c=a.length;b<c;b++)this.c(a[b]),b<c-1&&this.b(", ");
this.b(")")},"while":function(a){this.b("$_builder_$").b(".Loop(");this.b("function () {");var b=a[1];this.b("return ").c(b).b(";");this.b("},").b("null, ").b("$_builder_$.Delay(function () {");this.c(a[2]);this.b("}),").b("false");this.b(")")},while_n:function(a){var b=a[1];a=a[2];this.b("while (").c(b).b(") {");this.c(a);this.b("}")},"do":function(a){this.b("$_builder_$").b(".Loop(");var b=a[1];this.b("function () { return ").c(b).b("; },").b("null, ").b("$_builder_$.Delay(function () {");this.c(a[2]);
this.b("}),").b("true");this.b(")")},do_n:function(a){var b=a[1];a=a[2];this.b("do {");this.c(a);this.b("} while (").c(b).b(")")},"if":function(a){for(this.b("$_builder_$").b(".Delay(function () {");;){var b=a[1];this.b("if (").c(b).b(") {");this.c(a[2]);this.b("} else ");if((b=a[3])&&b[0]=="if")a=b;else break}this.b("{");(b=a[3])?this.c(b):this.b("return $_builder_$.Normal();");this.b("}");this.b("})")},if_n:function(a){var b=a[1],c=a[2];this.b("if (").c(b).b(") {");this.c(c);this.b("}");if(a=a[3])a[0]==
"if"?this.b(" else ").c(a):(this.b(" else {"),this.c(a),this.b("}"))},"return":function(a){this.b("return $_builder_$.Return(");(a=a[1])&&this.c(a);this.b(");")},return_n:function(a){this.b("return");(a=a[1])&&this.b(" ").c(a);this.b(";")},"break":function(){this.b("return $_builder_$.Break();")},break_n:function(){this.b("break;")},"continue":function(){this.b("return $_builder_$.Continue();")},continue_n:function(){this.b("continue;")},"throw":function(a){this.b("return $_builder_$.Throw(").q(a[1]).b(");")},
throw_n:function(a){this.b("throw ").c(a[1]).b(";")},conditional:function(a){this.b("(").c(a[1]).b(") ? ("+a[2]+") : (").c(a[3]).b(")")},"try":function(a){this.b("$_builder_$").b(".Try(");this.b("$_builder_$.Delay(function () {");this.d(a[1]);this.b("}),");var b=a[2];b?(this.b("function ("+b[0]+") {"),this.d(b[1]),this.b("}, ")):this.b("null,");(a=a[3])?(this.b("$_builder_$.Delay(function () {"),this.d(a),this.b("})")):this.b("null");this.b(")")},try_n:function(a){this.b("try {");this.e(a[1]);var b=
a[2];a=a[3];b&&(this.b("} catch ("+b[0]+") {"),this.e(b[1]));a&&(this.b("} finally {"),this.e(a));this.b("}")},defun:function(a){this.m(a)},"function":function(a){this.m(a)},"switch":function(){}}};return{compile:function(a,b){var c=UglifyJS.parse("var f = "+b.toString()+";")[1][0][1][0][1];return"("+(new f(a)).p(c)+")"},builders:{}}}();
